
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Interactive NidƒÅnas: The Wheel of Dependent Origination</title>
  <style>
    /* ===== BASE STYLES ===== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    :root {
      --bg-primary: #0a0a12;
      --bg-secondary: #12121e;
      --bg-tertiary: #1a1a2e;
      --text-primary: rgba(230, 230, 240, 0.96);
      --text-secondary: rgba(200, 200, 220, 0.85);
      --text-tertiary: rgba(170, 170, 190, 0.75);
      
      --accent-blue: rgba(100, 150, 255, 0.9);
      --accent-cyan: rgba(120, 210, 255, 0.9);
      --accent-gold: rgba(255, 200, 120, 0.9);
      --accent-mint: rgba(150, 255, 180, 0.9);
      --accent-purple: rgba(180, 120, 255, 0.9);
      
      --glow-blue: rgba(80, 120, 255, 0.4);
      --glow-cyan: rgba(100, 200, 255, 0.4);
      --glow-gold: rgba(255, 200, 100, 0.4);
      --glow-mint: rgba(100, 255, 180, 0.4);
      --glow-purple: rgba(150, 100, 255, 0.4);
      
      --transition-smooth: cubic-bezier(0.22, 1, 0.36, 1);
      --font-sans: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      --font-mono: "Menlo", "Monaco", "Consolas", monospace;
      --font-pali: "Arial Unicode MS", "Tahoma", serif;
    }
    
    body {
      background: var(--bg-primary);
      color: var(--text-primary);
      font-family: var(--font-mono);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow-x: hidden;
    }
    
    /* ===== MOBILE CONTAINER ===== */
    .mobile-container {
      width: 390px;
      height: 844px;
      background: linear-gradient(135deg, var(--bg-primary), var(--bg-tertiary));
      border-radius: 40px;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5),
                 inset 0 0 2px rgba(255, 255, 255, 0.05);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      position: relative;
    }
    
    /* ===== CONTENT AREA ===== */
    .content-area {
      flex: 1;
      overflow-y: auto;
      perspective: 1200px;
      overflow-x: hidden;
      scroll-behavior: smooth;
      position: relative;
    }
    
    .content-area::-webkit-scrollbar {
      width: 6px;
    }
    
    .content-area::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.05);
    }
    
    .content-area::-webkit-scrollbar-thumb {
      background: var(--accent-cyan);
      border-radius: 3px;
    }
    
    /* ===== SPLASH SCREEN ===== */
    .splash-screen {
      position: absolute;
      inset: 0;
      background: rgba(10, 10, 18, 0.95);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 100;
      opacity: 1;
      transition: opacity 0.8s var(--transition-smooth);
      text-align: center;
      pointer-events: none;
    }
    
    .splash-title {
      color: var(--accent-cyan);
      font-size: 2rem;
      text-shadow: 0 0 10px var(--glow-cyan);
      margin-bottom: 1rem;
      transform: translateY(0);
      transition: transform 1s var(--transition-smooth);
    }
    
    .splash-subtitle {
      color: var(--text-secondary);
      font-size: 0.9rem;
      opacity: 0.8;
      transform: translateY(0);
      transition: transform 1s var(--transition-smooth);
    }
    
    .splash-screen.hide {
      opacity: 0;
    }
    
    .splash-screen.hide .splash-title {
      transform: translateY(-20px);
    }
    
    .splash-screen.hide .splash-subtitle {
      transform: translateY(20px);
    }
    
    /* ===== SECTION STYLES ===== */
    .section {
      padding: 2rem 1.5rem;
      margin-bottom: 1rem;
    }
    
    .section-title {
      color: var(--accent-cyan);
      font-size: 1.5rem;
      margin-bottom: 1rem;
      text-align: center;
      text-shadow: 0 0 8px var(--glow-cyan);
    }
    
    .section-subtitle {
      color: var(--text-secondary);
      font-size: 0.9rem;
      text-align: center;
      margin-bottom: 2rem;
      font-style: italic;
    }
    
    /* ===== NIDANA LIST ===== */
    .nidana-list {
      list-style: none;
      margin: 0;
      padding: 0;
    }
    
    .nidana-item {
      margin-bottom: 1rem;
      transform-style: preserve-3d;
      transition: transform 0.5s var(--transition-smooth);
    }
    
    /* ===== NIDANA CARD ===== */
    .nidana-card {
      background: rgba(20, 30, 50, 0.4);
      border: 1px solid rgba(100, 200, 255, 0.15);
      border-radius: 12px;
      overflow: hidden;
      position: relative;
      transition: all 0.3s var(--transition-smooth);
      transform-style: preserve-3d;
    }
    
    .nidana-card::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(45deg, 
                  rgba(100, 200, 255, 0.05),
                  rgba(100, 200, 255, 0));
      z-index: -1;
    }
    
    .nidana-header {
      padding: 1rem;
      display: flex;
      align-items: center;
      cursor: pointer;
      position: relative;
      z-index: 2;
    }
    
    .nidana-number {
      font-weight: 700;
      color: var(--accent-blue);
      text-shadow: 0 0 6px var(--glow-blue);
      margin-right: 0.8rem;
      font-size: 1.2rem;
      transition: color 0.3s ease;
      width: 1.8rem;
      text-align: center;
    }
    
    .nidana-term {
      font-family: var(--font-pali);
      color: var(--accent-gold);
      text-shadow: 0 0 6px var(--glow-gold);
      font-style: italic;
      margin-right: 0.8rem;
      transition: color 0.3s ease;
      flex: 1;
    }
    
    .nidana-meaning {
      color: var(--text-secondary);
      margin-left: auto;
      font-size: 0.9rem;
      text-align: right;
    }
    
    .expand-icon {
      margin-left: 0.5rem;
      transition: transform 0.3s var(--transition-smooth);
      font-size: 1.2rem;
      width: 20px;
      display: flex;
      justify-content: center;
    }
    
    .nidana-card.expanded .expand-icon {
      transform: rotate(180deg);
    }
    
    /* ===== NIDANA CONTENT ===== */
    .nidana-content {
      height: 0;
      overflow: hidden;
      transition: height 0.3s var(--transition-smooth);
      padding: 0 1rem;
      opacity: 0;
      transform: translateY(-10px);
      transition: opacity 0.3s var(--transition-smooth),
                  transform 0.3s var(--transition-smooth),
                  height 0.3s var(--transition-smooth);
    }
    
    .nidana-card.expanded .nidana-content {
      opacity: 1;
      transform: translateY(0);
      padding-bottom: 1rem;
    }
    
    .nidana-description {
      margin-bottom: 1rem;
      line-height: 1.5;
    }
    
    /* ===== INTERACTIVE ELEMENTS ===== */
    .glossable {
      text-decoration: underline dotted var(--accent-cyan);
      cursor: pointer;
      position: relative;
      display: inline-block;
    }
    
    .canonical-quote {
      margin: 1rem 0;
      padding: 1rem;
      border-left: 3px solid var(--accent-gold);
      background: rgba(255, 200, 100, 0.05);
      position: relative;
      font-style: italic;
    }
    
    .quote-source {
      display: block;
      text-align: right;
      margin-top: 0.5rem;
      font-size: 0.8rem;
      color: var(--text-tertiary);
      font-style: normal;
    }
    
    /* ===== TOOLTIP ===== */
    .tooltip {
      position: fixed;
      background: rgba(15, 20, 35, 0.98);
      border: 1px solid rgba(100, 200, 255, 0.15);
      border-radius: 8px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4),
                 0 0 15px var(--glow-cyan);
      padding: 1rem;
      max-width: 280px;
      z-index: 101;
      opacity: 0;
      transform: scale(0.95);
      transition: opacity 0.3s var(--transition-smooth),
                  transform 0.3s var(--transition-smooth);
      pointer-events: none;
    }
    
    .tooltip.visible {
      opacity: 1;
      transform: scale(1);
      pointer-events: auto;
    }
    
    .tooltip-title {
      color: var(--accent-cyan);
      margin-bottom: 0.5rem;
      font-size: 1rem;
    }
    
    .tooltip-content {
      font-size: 0.9rem;
      line-height: 1.4;
    }
    
    /* ===== EXPANDABLE CONCEPTS ===== */
    .expandable-concept {
      margin: 1rem 0;
      cursor: pointer;
    }
    
    .concept-title {
      color: var(--accent-mint);
      display: flex;
      align-items: center;
      font-size: 0.95rem;
      margin-bottom: 0.5rem;
    }
    
    .concept-title::before {
      content: "+";
      display: inline-block;
      margin-right: 0.5rem;
      transition: transform 0.3s var(--transition-smooth);
      width: 16px;
      text-align: center;
    }
    
    .expandable-concept.expanded .concept-title::before {
      content: "-";
    }
    
    .concept-content {
      height: 0;
      overflow: hidden;
      padding-left: 1.5rem;
      transition: height 0.3s var(--transition-smooth);
      opacity: 0;
      transform: translateY(-5px);
      transition: opacity 0.3s var(--transition-smooth),
                  transform 0.3s var(--transition-smooth),
                  height 0.3s var(--transition-smooth);
    }
    
    .expandable-concept.expanded .concept-content {
      opacity: 1;
      transform: translateY(0);
    }
    
    /* ===== INTERLINEAR ADDITIONS ===== */
    .interlinear {
      position: relative;
      background: rgba(100, 150, 255, 0.05);
      border-radius: 8px;
      padding: 0.8rem;
      margin: 1rem 0;
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.5s var(--transition-smooth),
                  padding 0.5s var(--transition-smooth),
                  margin 0.5s var(--transition-smooth),
                  opacity 0.5s var(--transition-smooth);
      opacity: 0;
    }
    
    .interlinear.visible {
      max-height: 300px;
      opacity: 1;
    }
    
    .interlinear::before {
      content: "‚Üì Deeper insight ‚Üì";
      position: absolute;
      top: -0.8rem;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.7rem;
      background: var(--bg-tertiary);
      padding: 0.2rem 0.5rem;
      border-radius: 4px;
      color: var(--accent-cyan);
    }
    
    /* ===== FOLDED CONTENT ===== */
    .folded-content {
      position: relative;
      overflow: hidden;
      height: 0;
      opacity: 0;
      transform: translateY(-10px);
      transition: opacity 0.5s var(--transition-smooth),
                  transform 0.5s var(--transition-smooth),
                  height 0.5s var(--transition-smooth);
      margin: 0;
      padding: 0;
    }
    
    .folded-content.unfolded {
      height: auto;
      opacity: 1;
      transform: translateY(0);
      margin: 1rem 0;
      padding: 1rem;
      border-left: 3px solid var(--accent-purple);
      background: rgba(180, 120, 255, 0.05);
    }
    
    .fold-trigger {
      cursor: pointer;
      color: var(--accent-purple);
      text-decoration: underline dotted;
      display: inline-block;
    }
    
    /* ===== COMMENTARY ===== */
    .commentary {
      margin: 1.5rem 0;
      padding-left: 1rem;
      border-left: 3px solid rgba(200, 200, 220, 0.4);
      color: var(--text-secondary);
      font-style: italic;
      font-size: 0.95rem;
      line-height: 1.5;
    }
    
    /* ===== SECTION NAVIGATION ===== */
    .nav-buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 2rem;
    }
    
    .nav-button {
      background: rgba(100, 200, 255, 0.1);
      border: 1px solid rgba(100, 200, 255, 0.2);
      color: var(--text-primary);
      padding: 0.6rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: var(--font-mono);
      font-size: 0.9rem;
    }
    
    .nav-button:hover {
      background: rgba(100, 200, 255, 0.2);
    }
    
    .nav-button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    /* ===== WHEEL VISUALIZATION ===== */
    .wheel-container {
      margin: 2rem 0;
      display: flex;
      justify-content: center;
    }
    
    .wheel {
      width: 300px;
      height: 300px;
      border-radius: 50%;
      border: 2px solid var(--accent-gold);
      position: relative;
      box-shadow: 0 0 15px var(--glow-gold);
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(30, 40, 60, 0.4);
    }
    
    .wheel-segment {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      transform-origin: center;
      cursor: pointer;
    }
    
    .wheel-segment path {
      fill: rgba(30, 40, 60, 0.7);
      stroke: var(--accent-gold);
      stroke-width: 1;
      transition: fill 0.3s ease;
    }
    
    .wheel-segment:hover path {
      fill: rgba(255, 200, 100, 0.2);
    }
    
    .wheel-segment.active path {
      fill: rgba(255, 200, 100, 0.3);
    }
    
    .wheel-text {
      position: absolute;
      text-align: center;
      font-size: 0.7rem;
      transform-origin: center;
      width: 60px;
      color: var(--text-secondary);
      pointer-events: none;
    }
    
    .wheel-center {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: rgba(180, 120, 255, 0.2);
      border: 1px solid var(--accent-purple);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
      color: var(--accent-purple);
      text-align: center;
      box-shadow: 0 0 10px var(--glow-purple);
    }
    
    /* ===== PINNABLE TOOLTIPS ===== */
    .pin-tooltip {
      position: absolute;
      background: rgba(15, 20, 35, 0.95);
      border: 1px solid rgba(180, 120, 255, 0.3);
      border-radius: 8px;
      padding: 0.75rem;
      width: 200px;
      z-index: 10;
      opacity: 0;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3),
                 0 0 10px var(--glow-purple);
      pointer-events: none;
      transition: opacity 0.3s ease;
      font-size: 0.8rem;
      transform: translate(-50%, -100%);
    }
    
    .pin-tooltip::after {
      content: "";
      position: absolute;
      bottom: -8px;
      left: 50%;
      transform: translateX(-50%);
      border-width: 8px 8px 0;
      border-style: solid;
      border-color: rgba(15, 20, 35, 0.95) transparent transparent transparent;
    }
    
    .pin-tooltip.visible {
      opacity: 1;
      pointer-events: auto;
    }
    
    .pin-tooltip.pinned {
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4),
                 0 0 15px var(--glow-purple);
      border-color: var(--accent-purple);
    }
    
    .pin-button {
      position: absolute;
      right: 5px;
      top: 5px;
      background: none;
      border: none;
      color: var(--text-secondary);
      cursor: pointer;
      font-size: 0.8rem;
    }
    
    .pin-button:hover {
      color: var(--accent-purple);
    }
    
    /* ===== ANIMATIONS ===== */
    @keyframes pulse {
      0% { text-shadow: 0 0 8px var(--glow-cyan); }
      50% { text-shadow: 0 0 15px var(--glow-cyan); }
      100% { text-shadow: 0 0 8px var(--glow-cyan); }
    }
    
    @keyframes pulse-gold {
      0% { text-shadow: 0 0 8px var(--glow-gold); }
      50% { text-shadow: 0 0 15px var(--glow-gold); }
      100% { text-shadow: 0 0 8px var(--glow-gold); }
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-3px); }
    }
    
    .pulse {
      animation: pulse 4s infinite ease-in-out;
    }
    
    .pulse-gold {
      animation: pulse-gold 4s infinite ease-in-out;
    }
    
    .float {
      animation: float 6s infinite ease-in-out;
    }
    
    /* ===== RESPONSIVE ADJUSTMENTS ===== */
    @media (max-width: 400px) {
      .mobile-container {
        width: 100%;
        height: 100vh;
        border-radius: 0;
      }
    }
  </style>
</head>
<body>
  <div class="mobile-container">
    <div class="content-area" id="contentArea">
      <!-- Splash Screen -->
      <div class="splash-screen" id="splashScreen">
        <h1 class="splash-title">Pa·π≠icca-samuppƒÅda</h1>
        <p class="splash-subtitle">Scroll to explore the chain of dependent origination</p>
      </div>

      <!-- Introduction Section -->
      <section class="section" id="introduction">
        <h2 class="section-title">The Twelve NidƒÅnas</h2>
        <p class="section-subtitle">Exploring the links of dependent origination</p>
        
        <p class="nidana-description">
          The Buddha's teaching on <span class="glossable" data-title="Dependent Origination" data-content="The principle that all phenomena arise dependent on causes and conditions, and cease when those conditions cease.">Pa·π≠icca-samuppƒÅda</span> reveals how our experience of suffering arises through a chain of twelve causal links or nidƒÅnas. By understanding these links, we can see the path to liberation.
        </p>
        
        <p class="nidana-description">
          Each nidƒÅna represents a condition that leads to the arising of subsequent conditions, illustrating the cyclical nature of <span class="glossable" data-title="Sa·πÉsƒÅra" data-content="The cycle of repeated birth, death and rebirth within the six realms of existence.">sa·πÉsƒÅra</span>.
        </p>
        
        <div class="wheel-container">
          <div class="wheel" id="wheel">
            <svg viewBox="0 0 300 300" width="300" height="300">
              <!-- Wheel segments will be created by JavaScript -->
            </svg>
            <div class="wheel-center">Dependent Arising</div>
          </div>
        </div>
        
        <div class="commentary">
          Click each segment on the wheel to explore its meaning, or scroll down to explore each nidƒÅna in sequence. The foldouts, tooltips, and expandable sections provide deeper insights into the Buddha's teaching.
        </div>
      </section>
      
      <!-- Nidanas Section -->
      <section class="section" id="nidanas">
        <ul class="nidana-list" id="nidanaList">
          <!-- Nidana items will be created by JavaScript -->
        </ul>
        
        <div class="commentary">
          "When this exists, that exists; when this ceases to exist, that also ceases to exist." This is the essential principle of dependent origination, showing how all phenomena are interconnected.
        </div>
        
        <div class="nav-buttons">
          <button class="nav-button" id="prevButton" disabled>Previous</button>
          <button class="nav-button" id="nextButton">Next NidƒÅna</button>
        </div>
      </section>
    </div>
  </div>
  
  <!-- Tooltip -->
  <div class="tooltip" id="tooltip">
    <h3 class="tooltip-title" id="tooltipTitle"></h3>
    <div class="tooltip-content" id="tooltipContent"></div>
  </div>

  <script>
    // ===== DATA =====
    // Define the nidanas with their details
    const nidanas = [
      {
        number: 1,
        term: "avijjƒÅ",
        meaning: "Ignorance",
        description: "Ignorance of the Four Noble Truths and the true nature of reality. In the Buddhist sense, it refers to not understanding how things truly are.",
        quote: "And what is ignorance? Not knowing suffering, not knowing the origin of suffering, not knowing the cessation of suffering, not knowing the way leading to the cessation of suffering: this is called ignorance.",
        source: "SammƒÅdi·π≠·π≠hi Sutta (MN 9)",
        concepts: [
          {
            title: "Forms of Ignorance",
            content: "Ignorance manifests as not understanding impermanence (anicca), unsatisfactoriness (dukkha), and non-self (anattƒÅ). It is the fundamental misperception that leads to craving and suffering."
          },
          {
            title: "Cognitive Obscuration",
            content: "AvijjƒÅ functions as a cognitive obscuration that prevents seeing things as they truly are. The Buddha compared it to a cataract that obscures vision."
          }
        ],
        interlinear: "The Buddha described ignorance as a kind of 'blind-spot' in our understanding. It's not simply 'not knowing' something, but an active misperception of reality‚Äîtaking what is impermanent to be permanent, what is unsatisfactory to be satisfactory, and what is not-self to be self."
      },
      {
        number: 2,
        term: "sa·πÖkhƒÅra",
        meaning: "Volitional Formations",
        description: "Mental formations and volitions that arise from ignorance. These are the intentional activities that create karma and condition consciousness.",
        quote: "And what are fabrications? These three are fabrications: bodily fabrications, verbal fabrications, mental fabrications.",
        source: "Paticca-samuppada-vibhanga Sutta (SN 12.2)",
        concepts: [
          {
            title: "Types of Sa·πÖkhƒÅra",
            content: "According to the suttas, there are three types: bodily fabrications (in-and-out breathing), verbal fabrications (directed thought and evaluation), and mental fabrications (perception and feeling)."
          },
          {
            title: "Kammic Force",
            content: "Sa·πÖkhƒÅras function as the kammic force that propels beings through the cycle of rebirth. They are the volitional activities that determine one's future existence."
          }
        ],
        interlinear: "Sa·πÖkhƒÅra has a dual meaning in Buddhism: both 'that which puts together' (the active process of formation) and 'that which has been put together' (the conditioned phenomena). The Buddha's last words referenced sa·πÖkhƒÅra: 'All conditioned things are subject to decay. Strive diligently!'"
      },
      {
        number: 3,
        term: "vi√±√±ƒÅ·πáa",
        meaning: "Consciousness",
        description: "The awareness that arises dependent on sense organs and their objects. In the context of dependent origination, it's also the consciousness that links one life to the next.",
        quote: "And what is consciousness? These six are classes of consciousness: eye-consciousness, ear-consciousness, nose-consciousness, tongue-consciousness, body-consciousness, intellect-consciousness. This is called consciousness.",
        source: "Paticca-samuppada-vibhanga Sutta (SN 12.2)",
        concepts: [
          {
            title: "Six Types of Consciousness",
            content: "Consciousness is divided into six types according to the six sense bases: consciousness of sights, sounds, smells, tastes, physical sensations, and mental objects."
          },
          {
            title: "Relinking Consciousness",
            content: "In the context of rebirth, vi√±√±ƒÅ·πáa is the 'stream of consciousness' that continues from one life to the next, conditioned by past karma (sa·πÖkhƒÅras)."
          }
        ],
        interlinear: "Vi√±√±ƒÅ·πáa exists in mutual dependence with nƒÅmar≈´pa (name-and-form). In the MahƒÅnidƒÅna Sutta, the Buddha explained to ƒÄnanda that consciousness and name-and-form condition each other like two sheaves of reeds standing by supporting one another."
      },
      {
        number: 4,
        term: "nƒÅmar≈´pa",
        meaning: "Name and Form",
        description: "The psycho-physical complex comprising mental factors (nƒÅma) and physical form (r≈´pa). This is the mind-body organism that serves as the basis for experience.",
        quote: "And what is name-and-form? Feeling, perception, intention, contact, and attention: This is called name. The four great elements, and the form dependent on the four great elements: This is called form.",
        source: "Paticca-samuppada-vibhanga Sutta (SN 12.2)",
        concepts: [
          {
            title: "Name (NƒÅma)",
            content: "The mental aspects including feeling (vedanƒÅ), perception (sa√±√±ƒÅ), intention (cetanƒÅ), contact (phassa), and attention (manasikƒÅra)."
          },
          {
            title: "Form (R≈´pa)",
            content: "The physical aspects including the four great elements (earth/solidity, water/cohesion, fire/temperature, air/motion) and all material form derived from them."
          }
        ],
        interlinear: "The term nƒÅmar≈´pa has ancient roots in pre-Buddhist Vedic thought, where it referred to the principle of individuation. The Buddha redefined it within his system to describe the interdependent mental and physical processes that constitute a sentient being."
      },
      {
        number: 5,
        term: "sa·∏∑ƒÅyatana",
        meaning: "Six Sense Bases",
        description: "The six internal sense bases (eye, ear, nose, tongue, body, and mind) and their corresponding external objects. These are the gateways through which experience occurs.",
        quote: "And what are the six sense media? These six are sense media: the eye-medium, the ear-medium, the nose-medium, the tongue-medium, the body-medium, the intellect-medium.",
        source: "Paticca-samuppada-vibhanga Sutta (SN 12.2)",
        concepts: [
          {
            title: "Internal and External Bases",
            content: "Each sense base has both an internal aspect (the sense organ) and an external aspect (the corresponding objects). The eye and visible forms, the ear and sounds, and so on."
          },
          {
            title: "Mind as Sixth Sense",
            content: "Unlike Western models, Buddhism considers the mind (mano) as a sixth sense base that perceives mental objects (dhammƒÅ) such as thoughts, ideas, and memories."
          }
        ],
        interlinear: "The Sanskrit term 'ƒÅyatana' conveys the sense of a 'sphere' or 'field' of experience. Each sense base provides a distinct field through which consciousness engages with the world, creating the conditions for contact (phassa)."
      },
      {
        number: 6,
        term: "phassa",
        meaning: "Contact",
        description: "The coming together of sense organ, sense object, and the corresponding consciousness. This tripartite meeting is the basis for all experience.",
        quote: "And what is contact? These six are classes of contact: eye-contact, ear-contact, nose-contact, tongue-contact, body-contact, intellect-contact. This is called contact.",
        source: "Paticca-samuppada-vibhanga Sutta (SN 12.2)",
        concepts: [
          {
            title: "Tripartite Meeting",
            content: "Contact requires three factors: the sense organ, the sense object, and the corresponding consciousness. When these three meet, contact occurs."
          },
          {
            title: "Gateway to Experience",
            content: "Phassa serves as the gateway through which the external world affects us. Without contact, no experience would be possible."
          }
        ],
        interlinear: "In the Madhupi·πá·∏çika Sutta, the Buddha explained that dependent on contact, feeling arises; what one feels, one perceives; what one perceives, one thinks about; what one thinks about, one mentally proliferates. This shows how contact initiates the entire process of cognitive experience."
      },
      {
        number: 7,
        term: "vedanƒÅ",
        meaning: "Feeling",
        description: "The affective tone that arises from contact with sense objects. Feelings are categorized as pleasant, unpleasant, or neutral.",
        quote: "And what is feeling? These six are classes of feeling: feeling born from eye-contact, feeling born from ear-contact, feeling born from nose-contact, feeling born from tongue-contact, feeling born from body-contact, feeling born from intellect-contact.",
        source: "Paticca-samuppada-vibhanga Sutta (SN 12.2)",
        concepts: [
          {
            title: "Three Types of Feeling",
            content: "According to the Buddha, feelings are always one of three types: pleasant (sukha), unpleasant (dukkha), or neutral (adukkhamasukha)."
          },
          {
            title: "Feeling vs. Emotion",
            content: "VedanƒÅ differs from the Western concept of emotion. It refers specifically to the pleasant, unpleasant, or neutral tone of experience, which may then condition more complex emotional states."
          }
        ],
        interlinear: "The Buddha emphasized the importance of mindfulness of feeling (vedanƒÅnupassanƒÅ) because this is the critical juncture where craving arises. By observing feelings with mindfulness instead of reacting, we can interrupt the chain of dependent origination."
      },
      {
        number: 8,
        term: "ta·πáhƒÅ",
        meaning: "Craving",
        description: "The thirst or desire that arises based on feeling. It manifests as craving for sensual pleasures, craving for existence, and craving for non-existence.",
        quote: "And what is craving? These six are classes of craving: craving for forms, craving for sounds, craving for smells, craving for tastes, craving for tactile sensations, craving for ideas.",
        source: "Paticca-samuppada-vibhanga Sutta (SN 12.2)",
        concepts: [
          {
            title: "Three Types of Craving",
            content: "The Buddha identified three types of craving: kƒÅma-ta·πáhƒÅ (craving for sensual pleasures), bhava-ta·πáhƒÅ (craving for continued existence), and vibhava-ta·πáhƒÅ (craving for non-existence)."
          },
          {
            title: "Second Noble Truth",
            content: "Ta·πáhƒÅ features prominently in the Second Noble Truth as the cause of suffering (dukkha-samudaya). It's the driving force that perpetuates the cycle of rebirth."
          }
        ],
        interlinear: "The Pali word 'ta·πáhƒÅ' literally means 'thirst' and conveys a powerful sense of insatiable desire. The Buddha compared it to a fire that can never be satisfied no matter how much fuel it consumes."
      },
      {
        number: 9,
        term: "upƒÅdƒÅna",
        meaning: "Clinging",
        description: "The intensified form of craving that leads to attachment and appropriation. It manifests as clinging to sensual pleasures, views, rules and observances, and theories of self.",
        quote: "And what is clinging/sustenance? These four are clingings: clinging to sensuality, clinging to views, clinging to precepts and practices, clinging to doctrines of self.",
        source: "Paticca-samuppada-vibhanga Sutta (SN 12.2)",
        concepts: [
          {
            title: "Four Types of Clinging",
            content: "The Buddha described four types: kƒÅmupƒÅdƒÅna (clinging to sensual pleasures), di·π≠·π≠hupƒÅdƒÅna (clinging to views), sƒ´labbatupƒÅdƒÅna (clinging to rules and observances), and attavƒÅdupƒÅdƒÅna (clinging to theories of self)."
          },
          {
            title: "Fuel for Becoming",
            content: "The term upƒÅdƒÅna also means 'fuel' or 'nutriment', suggesting that clinging acts as the fuel that sustains the process of becoming (bhava)."
          }
        ],
        interlinear: "While ta·πáhƒÅ (craving) represents the initial impulse of desire, upƒÅdƒÅna represents a stronger, more developed form of attachment where one actively grasps and appropriates objects, experiences, or views as 'mine'."
      },
      {
        number: 10,
        term: "bhava",
        meaning: "Becoming",
        description: "The process of coming into existence in a particular realm. It represents both the active process of producing a new existence and the state of existence itself.",
        quote: "And what is becoming? These three are becomings: sensual becoming, form becoming, formless becoming. This is called becoming.",
        source: "Paticca-samuppada-vibhanga Sutta (SN 12.2)",
        concepts: [
          {
            title: "Three Realms of Becoming",
            content: "The Buddha described three types: kƒÅma-bhava (becoming in the sensual realm), r≈´pa-bhava (becoming in the form realm), and ar≈´pa-bhava (becoming in the formless realm)."
          },
          {
            title: "Dual Aspect",
            content: "Bhava has both an active aspect (kamma-bhava) referring to the actions that produce rebirth, and a passive aspect (upapatti-bhava) referring to the resultant rebirth itself."
          }
        ],
        interlinear: "The process of becoming (bhava) is where the accumulation of kamma finally begins to bear fruit, creating the conditions for specific forms of rebirth. It's the penultimate link before the actual manifestation of a new birth."
      },
      {
        number: 11,
        term: "jƒÅti",
        meaning: "Birth",
        description: "The manifestation of the five aggregates in a new existence. In the context of dependent origination, it refers to the beginning of a new life conditioned by previous becoming.",
        quote: "And what is birth? Whatever birth, taking birth, descent, coming-to-be, coming-forth, appearance of aggregates, and acquisition of sense media of the various beings in this or that group of beings, that is called birth.",
        source: "Paticca-samuppada-vibhanga Sutta (SN 12.2)",
        concepts: [
          {
            title: "Manifestation of Aggregates",
            content: "Birth (jƒÅti) refers to the manifestation of a new set of five aggregates (form, feeling, perception, mental formations, and consciousness) at the beginning of a life."
          },
          {
            title: "Moment-to-Moment Birth",
            content: "On a subtler level, jƒÅti can also refer to the moment-to-moment 'birth' of phenomena in our experience as we continuously generate new states of becoming."
          }
        ],
        interlinear: "The Buddha emphasized that birth itself is suffering because it inevitably leads to aging, illness, and death. The recognition of this fundamental unsatisfactoriness of existence motivates the search for liberation from the cycle."
      },
      {
        number: 12,
        term: "jarƒÅmara·πáa",
        meaning: "Aging and Death",
        description: "The inevitable processes of decay and dissolution that follow birth. This final link completes the cycle, as the suffering associated with aging and death conditions ignorance, starting the cycle again.",
        quote: "And what is aging and death? Whatever aging, decrepitude, brokenness, graying, wrinkling, decline of life-force, weakening of the faculties... Whatever falling away, perishing, breaking up, disappearance, dying, death...",
        source: "Paticca-samuppada-vibhanga Sutta (SN 12.2)",
        concepts: [
          {
            title: "Universal Characteristic",
            content: "Aging and death are universal characteristics of all conditioned phenomena, not just living beings. Everything that arises must eventually cease."
          },
          {
            title: "Closing the Circle",
            content: "JarƒÅmara·πáa completes the circle of dependent origination, as the suffering associated with aging and death gives rise to confusion and ignorance (avijjƒÅ), beginning the cycle anew."
          }
        ],
        interlinear: "The Buddha's own spiritual journey began when he encountered the existential reality of aging, illness, and death during his famous chariot rides outside the palace. This recognition of mortality led him to seek a path beyond suffering."
      }
    ];

    // ===== INITIALIZATION =====
    document.addEventListener("DOMContentLoaded", function() {
      // Hide splash screen on scroll
      const splashScreen = document.getElementById("splashScreen");
      const contentArea = document.getElementById("contentArea");
      
      contentArea.addEventListener("scroll", function() {
        if (contentArea.scrollTop > 10) {
          splashScreen.classList.add("hide");
        }
      });
      
      // Create the wheel visualization
      createWheel();
      
      // Create nidana list items
      createNidanaList();
      
      // Set up glossable terms
      setupGlossableTerms();
      
      // Set up navigation buttons
      setupNavigation();
      
      // After a delay, add a hint to scroll
      setTimeout(() => {
        if (!splashScreen.classList.contains("hide")) {
          splashScreen.classList.add("pulse");
        }
      }, 3000);
    });
    
    // ===== WHEEL VISUALIZATION =====
    function createWheel() {
      const wheelSvg = document.querySelector("#wheel svg");
      const segmentAngle = 360 / nidanas.length;
      const centerX = 150;
      const centerY = 150;
      const radius = 145;
      
      nidanas.forEach((nidana, index) => {
        // Calculate start and end angles for segment
        const startAngle = index * segmentAngle;
        const endAngle = (index + 1) * segmentAngle;
        
        // Convert angles to radians
        const startRadians = (startAngle - 90) * Math.PI / 180;
        const endRadians = (endAngle - 90) * Math.PI / 180;
        
        // Calculate points
        const innerRadius = 60;
        const x1 = centerX + innerRadius * Math.cos(startRadians);
        const y1 = centerY + innerRadius * Math.sin(startRadians);
        const x2 = centerX + radius * Math.cos(startRadians);
        const y2 = centerY + radius * Math.sin(startRadians);
        const x3 = centerX + radius * Math.cos(endRadians);
        const y3 = centerY + radius * Math.sin(endRadians);
        const x4 = centerX + innerRadius * Math.cos(endRadians);
        const y4 = centerY + innerRadius * Math.sin(endRadians);
        
        // Create segment path
        const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
        path.setAttribute("d", `M ${x1} ${y1} L ${x2} ${y2} A ${radius} ${radius} 0 0 1 ${x3} ${y3} L ${x4} ${y4} A ${innerRadius} ${innerRadius} 0 0 0 ${x1} ${y1}`);
        
        // Create segment group
        const segment = document.createElementNS("http://www.w3.org/2000/svg", "g");
        segment.classList.add("wheel-segment");
        segment.setAttribute("data-index", index);
        segment.appendChild(path);
        
        // Add click event
        segment.addEventListener("click", function() {
          highlightNidana(index);
          scrollToNidana(index);
        });
        
        wheelSvg.appendChild(segment);
        
        // Add segment text
        const textAngle = startAngle + (segmentAngle / 2);
        const textRadians = (textAngle - 90) * Math.PI / 180;
        const textDistance = (innerRadius + radius) / 2;
        const textX = centerX + textDistance * Math.cos(textRadians);
        const textY = centerY + textDistance * Math.sin(textRadians);
        
        const text = document.createElement("div");
        text.classList.add("wheel-text");
        text.textContent = `${index + 1}. ${nidana.term}`;
        text.style.left = `${textX}px`;
        text.style.top = `${textY}px`;
        text.style.transform = `translate(-50%, -50%) rotate(${textAngle}deg)`;
        
        document.querySelector("#wheel").appendChild(text);
      });
    }
    
    function highlightNidana(index) {
      // Remove active class from all segments
      document.querySelectorAll(".wheel-segment").forEach(segment => {
        segment.classList.remove("active");
      });
      
      // Add active class to selected segment
      document.querySelector(`.wheel-segment[data-index="${index}"]`).classList.add("active");
    }
    
    // ===== NIDANA LIST =====
    function createNidanaList() {
      const nidanaList = document.getElementById("nidanaList");
      
      nidanas.forEach((nidana, index) => {
        const nidanaItem = document.createElement("li");
        nidanaItem.classList.add("nidana-item");
        nidanaItem.setAttribute("id", `nidana-${index + 1}`);
        
        // Create card
        const nidanaCard = document.createElement("div");
        nidanaCard.classList.add("nidana-card");
        
        // Create header
        const nidanaHeader = document.createElement("div");
        nidanaHeader.classList.add("nidana-header");
        nidanaHeader.innerHTML = `
          <span class="nidana-number">${nidana.number}.</span>
          <span class="nidana-term">${nidana.term}</span>
          <span class="nidana-meaning">${nidana.meaning}</span>
          <span class="expand-icon">‚Üì</span>
        `;
        nidanaHeader.addEventListener("click", function() {
          toggleNidanaContent(nidanaCard, nidana);
        });
        
        // Create content container
        const nidanaContent = document.createElement("div");
        nidanaContent.classList.add("nidana-content");
        
        nidanaCard.appendChild(nidanaHeader);
        nidanaCard.appendChild(nidanaContent);
        nidanaItem.appendChild(nidanaCard);
        nidanaList.appendChild(nidanaItem);
      });
    }
    
    function toggleNidanaContent(card, nidana) {
      const content = card.querySelector(".nidana-content");
      
      if (card.classList.contains("expanded")) {
        // Close the card
        card.classList.remove("expanded");
        content.style.height = "0";
      } else {
        // Close any open cards
        document.querySelectorAll(".nidana-card.expanded").forEach(openCard => {
          openCard.classList.remove("expanded");
          openCard.querySelector(".nidana-content").style.height = "0";
        });
        
        // Open the card
        card.classList.add("expanded");
        
        // Populate content if empty
        if (!content.hasChildNodes()) {
          populateNidanaContent(content, nidana);
        }
        
        // Set height for animation
        content.style.height = content.scrollHeight + "px";
      }
    }
    
    function populateNidanaContent(contentElement, nidana) {
      // Description
      const description = document.createElement("p");
      description.classList.add("nidana-description");
      description.textContent = nidana.description;
      contentElement.appendChild(description);
      
      // Canonical quote
      if (nidana.quote) {
        const quoteContainer = document.createElement("div");
        quoteContainer.classList.add("canonical-quote");
        quoteContainer.innerHTML = `
          "${nidana.quote}"
          <span class="quote-source">${nidana.source}</span>
        `;
        contentElement.appendChild(quoteContainer);
      }
      
      // Expandable concepts
      if (nidana.concepts && nidana.concepts.length > 0) {
        nidana.concepts.forEach(concept => {
          const conceptElement = document.createElement("div");
          conceptElement.classList.add("expandable-concept");
          
          const conceptTitle = document.createElement("div");
          conceptTitle.classList.add("concept-title");
          conceptTitle.textContent = concept.title;
          
          const conceptContent = document.createElement("div");
          conceptContent.classList.add("concept-content");
          conceptContent.textContent = concept.content;
          
          conceptElement.appendChild(conceptTitle);
          conceptElement.appendChild(conceptContent);
          
          conceptElement.addEventListener("click", function(event) {
            // Prevent bubbling to parent elements
            event.stopPropagation();
            
            toggleConcept(conceptElement);
          });
          
          contentElement.appendChild(conceptElement);
        });
      }
      
      // Interlinear content
      if (nidana.interlinear) {
        const interlinear = document.createElement("div");
        interlinear.classList.add("interlinear");
        interlinear.textContent = nidana.interlinear;
        
        contentElement.appendChild(interlinear);
        
        // Add a trigger to show the interlinear with delay
        setTimeout(() => {
          interlinear.classList.add("visible");
        }, 1000);
      }
      
      // Add fold trigger and folded content if there are concepts
      if (nidana.concepts && nidana.concepts.length > 0) {
        const foldTrigger = document.createElement("div");
        foldTrigger.classList.add("fold-trigger");
        foldTrigger.textContent = "Explore deeper implications...";
        contentElement.appendChild(foldTrigger);
        
        const foldedContent = document.createElement("div");
        foldedContent.classList.add("folded-content");
        foldedContent.innerHTML = `
          <p>The ${nidana.term} link in the chain of dependent origination shows how our experience is constructed moment by moment. By examining this process mindfully, we can see the impermanent, conditioned nature of all phenomena.</p>
          <p>Understanding this link is crucial for seeing the path to liberation, as it reveals a point where the cycle can be broken through wisdom and mindfulness.</p>
        `;
        contentElement.appendChild(foldedContent);
        
        foldTrigger.addEventListener("click", function(event) {
          event.stopPropagation();
          foldedContent.classList.toggle("unfolded");
          foldTrigger.textContent = foldedContent.classList.contains("unfolded") ? 
            "Hide details..." : "Explore deeper implications...";
        });
      }
    }
    
    function toggleConcept(conceptElement) {
      const content = conceptElement.querySelector(".concept-content");
      
      if (conceptElement.classList.contains("expanded")) {
        // Close the concept
        conceptElement.classList.remove("expanded");
        content.style.height = "0";
      } else {
        // Open the concept
        conceptElement.classList.add("expanded");
        content.style.height = content.scrollHeight + "px";
      }
    }
    
    // ===== GLOSSABLE TERMS =====
    function setupGlossableTerms() {
      const glossableTerms = document.querySelectorAll(".glossable");
      const tooltip = document.getElementById("tooltip");
      const tooltipTitle = document.getElementById("tooltipTitle");
      const tooltipContent = document.getElementById("tooltipContent");
      
      glossableTerms.forEach(term => {
        term.addEventListener("mouseenter", function(event) {
          // Position the tooltip
          const rect = term.getBoundingClientRect();
          tooltip.style.left = (rect.left + rect.width / 2) + "px";
          tooltip.style.top = (rect.top - 10) + "px";
          
          // Set tooltip content
          tooltipTitle.textContent = term.getAttribute("data-title");
          tooltipContent.textContent = term.getAttribute("data-content");
          
          // Show the tooltip
          tooltip.classList.add("visible");
        });
        
        term.addEventListener("mouseleave", function() {
          // Hide the tooltip
          tooltip.classList.remove("visible");
        });
      });
      
      // Close tooltip when clicking outside
      document.addEventListener("click", function(event) {
        if (!event.target.closest(".glossable") && !event.target.closest(".tooltip")) {
          tooltip.classList.remove("visible");
        }
      });
    }
    
    // ===== NAVIGATION =====
    function setupNavigation() {
      const prevButton = document.getElementById("prevButton");
      const nextButton = document.getElementById("nextButton");
      let currentNidana = 0;
      
      // Next button
      nextButton.addEventListener("click", function() {
        if (currentNidana < nidanas.length - 1) {
          currentNidana++;
          scrollToNidana(currentNidana);
          updateNavButtons();
        }
      });
      
      // Previous button
      prevButton.addEventListener("click", function() {
        if (currentNidana > 0) {
          currentNidana--;
          scrollToNidana(currentNidana);
          updateNavButtons();
        }
      });
      
      function updateNavButtons() {
        prevButton.disabled = currentNidana === 0;
        nextButton.disabled = currentNidana === nidanas.length - 1;
        
        // Update text for last nidana
        if (currentNidana === nidanas.length - 1) {
          nextButton.textContent = "End of Chain";
        } else {
          nextButton.textContent = "Next NidƒÅna";
        }
      }
    }
    
    function scrollToNidana(index) {
      const nidanaElement = document.getElementById(`nidana-${index + 1}`);
      const contentArea = document.getElementById("contentArea");
      
      if (nidanaElement) {
        // Scroll to the element
        contentArea.scrollTo({
          top: nidanaElement.offsetTop - 100,
          behavior: "smooth"
        });
        
        // Highlight on wheel
        highlightNidana(index);
        
        // Open the card if closed
        const card = nidanaElement.querySelector(".nidana-card");
        if (!card.classList.contains("expanded")) {
          toggleNidanaContent(card, nidanas[index]);
        }
        
        // Add highlight effect
        nidanaElement.classList.add("highlight");
        setTimeout(() => {
          nidanaElement.classList.remove("highlight");
        }, 1000);
      }
    }
    
    // ===== PINNABLE TOOLTIPS =====
    function createPinnableTooltip(element, title, content) {
      // Create tooltip
      const tooltip = document.createElement("div");
      tooltip.classList.add("pin-tooltip");
      
      // Add pin button
      const pinButton = document.createElement("button");
      pinButton.classList.add("pin-button");
      pinButton.innerHTML = "üìå";
      pinButton.title = "Pin this tooltip";
      
      // Add content
      tooltip.innerHTML = `
        <h4>${title}</h4>
        <p>${content}</p>
      `;
      tooltip.appendChild(pinButton);
      
      // Position the tooltip
      const rect = element.getBoundingClientRect();
      tooltip.style.left = (rect.left + rect.width / 2) + "px";
      tooltip.style.top = rect.top + "px";
      
      // Add tooltip to the DOM
      document.body.appendChild(tooltip);
      
      // Show the tooltip
      setTimeout(() => {
        tooltip.classList.add("visible");
      }, 10);
      
      // Pin/unpin functionality
      pinButton.addEventListener("click", function() {
        tooltip.classList.toggle("pinned");
        pinButton.innerHTML = tooltip.classList.contains("pinned") ? "‚ùå" : "üìå";
        pinButton.title = tooltip.classList.contains("pinned") ? "Unpin" : "Pin this tooltip";
      });
      
      // Close tooltip when clicking outside
      document.addEventListener("click", function(event) {
        if (!tooltip.classList.contains("pinned") && 
            !tooltip.contains(event.target) && 
            event.target !== element) {
          tooltip.classList.remove("visible");
          setTimeout(() => {
            tooltip.remove();
          }, 300);
        }
      });
      
      return tooltip;
    }
  </script>
</body>
</html>
